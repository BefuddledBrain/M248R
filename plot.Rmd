---
output:
  pdf_document:
    latex_engine: pdflatex
    keep_tex: true
    template: "o:/dtma/tex/dt-tikz.tex"

# fontsize: 11pt
---

```{r all_chunks, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      error = FALSE, 
                      warning = FALSE, 
                      message = FALSE, 
                      include = TRUE, 
                      fig.path = 'o:/dtma/figs')
```

```{r label = "load-pkgs"}
packages <- c("tidyverse", "latex2exp")
xfun::pkg_attach(packages, install = TRUE, message = FALSE)
```
\pagestyle{empty}
# Creating a plot of a function in Rmarkdown using Pgfplots

I am experimenting with the \LaTeX\ package Pgfplots because I haven't found a way to persuade 'Ggplot2' to produce maths-style plots, with the axes going through the origin. Sure, I can mimic the axes with 'geom_vline(xintercept = 0)' and 'geom_hline(yintercept = 0)' but then adding ticks and labels requires major faffing about.

\begin{tikzpicture}
  \begin{axis}[
          width = 10cm, 
          title style = { at = {(axis description cs: 0, 1)}, 
                          yshift = 5mm, 
                          font = \small, 
                          }, 
          title = An example plot, 
          axis lines = middle, 
          enlargelimits = true, 
          axis line style = {thick, black}, 
          xlabel = $x$, 
          ylabel = {$f(x)$}, 
          label style = {font = \small, }, 
          xlabel style = {anchor = west, }, 
          ylabel style = {anchor = south, }, 
          tick style = {thick, black}, 
          tick label style = {font = \tiny}, 
          xtick = {-4,...,4}, 
          tick align = outside, 
          major tick length = {0.6mm}, 
          ]
  \addplot[
          domain = -3.75:3.75, 
          samples = 200, 
          smooth, red, 
          ]
          {(1/4)*x^3};
  \addplot[
          domain = -3.25:3, 
          samples = 200, 
          smooth, blue, 
          ]
          {x^2 + 2*x + 1};
  \end{axis}
\end{tikzpicture}

This is generated by:

\begin{verbatim}
\begin{tikzpicture}
  \begin{axis}[
          width = 10cm, 
          title style = { at = {(axis description cs: 0, 1)}, 
                          yshift = 5mm, 
                          font = \small, 
                          }, 
          title = An example plot, 
          axis lines = middle, 
          enlargelimits = true, 
          axis line style = {thick, black}, 
          xlabel = $x$, 
          ylabel = {$f(x)$}, 
          label style = {font = \small, }, 
          xlabel style = {anchor = west, }, 
          ylabel style = {anchor = south, }, 
          tick style = {thick, black}, 
          tick label style = {font = \tiny}, 
          xtick = {-4,...,4}, 
          tick align = outside, 
          major tick length = {0.6mm}, 
          ]
  \addplot[domain = -3.75:3.75, samples = 200, smooth, red, ]
          {(1/4)*x^3};
  \addplot[domain = -3.25:3, samples = 200, smooth, blue, ]
          {x^2 + 2*x + 1};
  \end{axis}
\end{tikzpicture}
\end{verbatim}

